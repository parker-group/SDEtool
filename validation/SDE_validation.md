\# 🧪 Standard Deviational Ellipse (SDE) Validation



This page documents the validation of an R-based Standard Deviational Ellipse (SDE) tool by comparing its output with ellipses generated by CrimeStat. We tested 1- and 2-standard deviation ellipses generated from the same dataset.



---



\## 🔍 Summary of Results



| Metric                | 1 SD Ellipse        | 2 SD Ellipse        |

|-----------------------|---------------------|---------------------|

| \*\*Area (R Tool)\*\*     | 12,506,460 m²       | 50,025,840 m²       |

| \*\*Area (CrimeStat)\*\*  | 12,834,232 m²       | 51,102,470 m²       |

| \*\*IoU\*\*               | 0.979               | 0.979               |

| \*\*Centroid Distance\*\* | 0.139 m             | 0.317 m             |

| \*\*Orientation (R)\*\*   | 169.00°             | 169.00°             |

| \*\*Orientation (CS)\*\*  | 169.00°             | 169.00°             |

| \*\*Angle Difference\*\*  | 0.004°              | 0.004°              |

| \*\*Eccentricity (R)\*\*  | 0.877               | 0.877               |

| \*\*Eccentricity (CS)\*\* | 0.877               | 0.877               |

| \*\*Ecc. Difference\*\*   | 0.000               | 0.000               |



> ℹ️ \*Orientation is derived from the first principal component of the polygon coordinates. Eccentricity is calculated as √(1 - b²/a²), where `a` and `b` are the semi-major and semi-minor axes.\*



---



\## 📐 Methodology



\- \*\*R Tool\*\*: Uses PCA (eigen decomposition of the coordinate matrix) to define orientation and shape.

\- \*\*CrimeStat\*\*: Uses moment-based orientation derived from dispersion about the mean center.

\- All files were projected to \*\*WGS 84 / UTM Zone 18N (EPSG:32618)\*\* prior to comparison.

\- Comparison metrics:

&nbsp; - Area

&nbsp; - Intersection over Union (IoU)

&nbsp; - Centroid Distance

&nbsp; - Orientation Angle (degrees)

&nbsp; - Eccentricity



---



\## 🖼️ Visual Comparison



\### 1 SD Ellipses



!\[Visual Comparison of 1 SD Ellipses](figures/SDE\_overlay\_1SD.png)



---



\### 2 SD Ellipses



!\[Visual Comparison of 2 SD Ellipses](figures/SDE\_overlay\_2SD.png)



---



\## 📜 Key R Functions Used



```r

extract\_orientation\_eccentricity <- function(polygon\_sf) {

&nbsp; coords <- st\_coordinates(polygon\_sf)\[, 1:2]

&nbsp; pca <- prcomp(coords, center = TRUE, scale. = FALSE)

&nbsp; angle\_deg <- (atan2(pca$rotation\[2,1], pca$rotation\[1,1]) \* 180 / pi) %% 180

&nbsp; eigvals <- pca$sdev^2

&nbsp; a <- sqrt(max(eigvals)); b <- sqrt(min(eigvals))

&nbsp; ecc <- sqrt(1 - (b^2 / a^2))

&nbsp; list(angle = angle\_deg, eccentricity = ecc)

}



validate\_sde\_pair <- function(ellipse\_r, ellipse\_cs, label) {

&nbsp; area\_r <- st\_area(ellipse\_r)

&nbsp; area\_cs <- st\_area(ellipse\_cs)

&nbsp; iou <- st\_area(st\_intersection(ellipse\_r, ellipse\_cs)) / 

&nbsp;        st\_area(st\_union(ellipse\_r, ellipse\_cs))

&nbsp; centroid\_dist <- st\_distance(st\_centroid(ellipse\_r), st\_centroid(ellipse\_cs))



&nbsp; orient\_r <- extract\_orientation\_eccentricity(ellipse\_r)

&nbsp; orient\_cs <- extract\_orientation\_eccentricity(ellipse\_cs)



&nbsp; tibble::tibble(

&nbsp;   label = label,

&nbsp;   area\_r = as.numeric(area\_r),

&nbsp;   area\_cs = as.numeric(area\_cs),

&nbsp;   iou = as.numeric(iou),

&nbsp;   centroid\_dist = as.numeric(centroid\_dist),

&nbsp;   angle\_r = orient\_r$angle,

&nbsp;   angle\_cs = orient\_cs$angle,

&nbsp;   angle\_diff = abs(orient\_r$angle - orient\_cs$angle),

&nbsp;   ecc\_r = orient\_r$eccentricity,

&nbsp;   ecc\_cs = orient\_cs$eccentricity,

&nbsp;   ecc\_diff = abs(orient\_r$eccentricity - orient\_cs$eccentricity)

&nbsp; )

}



